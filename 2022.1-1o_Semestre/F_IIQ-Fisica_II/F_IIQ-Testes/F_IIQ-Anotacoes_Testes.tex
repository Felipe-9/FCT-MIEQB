% !TEX root = ./main_file.tex
% \documentclass{article}
\documentclass[
    class=article,
    multi={minipage},
    border={3mm},
]{standalone}



% Colors
\usepackage[hyperref]{xcolor}
\usepackage{mypallete}
    % Options:
        % gray - dark and light
\colorlet{foreground}{light}
\colorlet{background}{dark}
% Palette Secondaries
\colorlet{Emph}  {DarkGreen!70!foreground}
\colorlet{Link} {LightGreen!25!foreground}
\colorlet{Comment}   {foreground!60!background}
\colorlet{Background}{foreground!27!background}

\pagecolor{background}
\color    {foreground}



% lua
\usepackage{luacode}



% xparse - multiple optional arguments
\usepackage{xparse}



% Geometry
\setlength\textwidth{160mm}
% \usepackage{geometry}
% \geometry{
%     % papersize = {300mm, 400mm}, % ( 4:3 ) SVGA x 0.5
%     % papersize = {240mm, 320mm}, % ( 4:3 ) SVGA x 0.4
%     % papersize = {120mm, 640mm}, % ( 2*4:3/2 )
%     % papersize = {180mm, 240mm}, % ( 4:3 ) SVGA x 0.3
%     % papersize = {229mm, 305mm}, % ( 4:3 ) ArchA/Arch1
%     % papersize = {320mm, 512mm}, % (16:10)
%     % papersize = {280mm, 448mm}, % (16:10)
%     % papersize = {240mm, 384mm}, % (16:10)
%     % a4paper,  % {210mm, 297mm}, % (√2:1 ) A4
%     papersize = {180mm, 1m}, % LONG ( 4:3 ) SVGA x 0.3
%     top       = 21mm,
%     bottom    = 21mm,
%     left      = .06\paperwidth,
%     right     = .06\paperwidth,
%     portrait  = true,
% }



% fonts
\usepackage[fontsize=12pt]{fontsize}
\usepackage[T1]{fontenc}
\usepackage{fontspec}
% \usepackage[sfdefault, ultralight]{FiraSans}

% default style
% \renewcommand{\familydefault}{\sfdefault} % sans serif

% Set font family
\setmainfont[
    Ligatures = TeX,
    UprightFont    = *-Light,
    ItalicFont     = *-LightIt,
    SmallCapsFont  = *SmText-Light,
    BoldFont       = *-Regular,
    BoldItalicFont = *-It
]{
    % % Serif fonts:
    SourceSerif4
    % Handwritten fonts:
    % DancingScript
    % Apple Chancery
    % Luminari
    % PetitFormalScript
    % Merienda
    % LaBelleAurore
    % Handlee
        % BadScript
        % Calligraffitti
}

% Monofont
% \setmonofont[Contextuals = {ligatures}]{FiraCode}
% \makeatletter
% \def\verbatim@nolig@list{}
% \makeatother

\RenewDocumentCommand\emph{
    O{Emph} % #1 - Color
    m       % #2 - content
}{\textcolor{#1}{#2}}


% Linguagem
\usepackage[portuguese]{babel} % Babel
%\usepackage{polyglossia}      % Polyglossia
%\setdefaultlanguage[variant=brazilian]{portuguese}



% Graphics
% \usepackage[draft, final]{graphics, graphicx}
% \usepackage{graphicx}
% \graphicspath{{./.build/figures}}



% calc
\usepackage{calc}



% Table of contents
\usepackage{tocloft}
\setcounter{tocdepth}{2}    % remove subsubsection from toc

% part
\renewcommand\cftpartfont{\bfseries}
%\renewcommand\cftpartafterpnum{\vspace{0mm}}
\setlength\cftbeforepartskip{1ex}

% sec
\renewcommand\cftsecfont{}                          % Font
\renewcommand\cftsecpagefont{}                      % page number font
\renewcommand\cftsecleader{\cftdotfill{\cftdotsep}} % Dots
\setlength\cftbeforesecskip{0.5ex}
\setlength\cftsecindent{0mm}
%\setlength{\cftsecnumwidth}{25mm}                  % Fix section width

% subsec
\setlength\cftsubsecindent{0mm}
%\setlength{\cftsubsecnumwidth}{15mm}

% tab (table)
\setlength\cfttabindent{0mm}



% filecontents
%\usepackage{scontents}     % the better filecontents
%\usepackage{filecontents}  % Create files



% Multicols
\usepackage{multicol}
\setlength{\columnsep}{.05\textwidth}
\multicoltolerance = 200

% toggle multicols  on/off
% \renewenvironment{multicols}[1]{}{\relax}



% enumitem
\usepackage{enumitem}  % modify enumerate index
\setlist[description]{
    format={\color{Emph}}
}



% titlesec
\usepackage{titlesec}

% Reset section on part
\counterwithin*{section}{part}

% Spacing: \titlespacing*{<left>}{<before>}{<after>}[<right>]
\titlespacing*{\part}      {0pt}{ 0pt}{0pt}
\titlespacing*{\section}   {0pt}{10mm}{0pt}
\titlespacing*{\subsection}{0pt}{ 5mm}{0pt}

% Part customization
\titleclass\part{straight}
\titleformat\part
[block] % shape
{%
    \begin{minipage}{\textwidth}%
    \centering\Large\bfseries\color{Emph}%
    {\titlerule[1pt]}\vspace{3pt}%
} % format
{%
    \thepart\hspace{.5em}{--}
} % label
% {\thepart} % label without --
{.5em} % sep
{} % before-code
[\vspace{2pt}{\titlerule[1pt]}\end{minipage}] % after  code

% % Chapter customization
% \titleclass{\chapter}{straight}
% \titleformat{\chapter}
%    [block]                         % shape
%    {\huge\bfseries\color{Emph}}    % format
%    {\thepart\hspace{5mm}{\(|\)}}   % label
%    {5mm}                           % sep
%    {\huge\bfseries}                % before-code
%    [\vspace{0.5mm}]                % after-code



% Appendix
% \usepackage{appendix}



% siunix: SI units
\usepackage{siunitx}
\sisetup{
    % scientific / engineering / false / fixed
    scientific-notation    = engineering,
    exponent-to-prefix     = false,          % 1000 g -> 1 kg
    exponent-product       = *,             % x * 10^y
    round-mode             = places,        % figures/places/none
    round-precision        = 2,
    % output-exponent-marker = {\,\mathrm{E}},
}
\DeclareSIUnit\atm{atm}
\DeclareSIUnit\calorie{cal}
\DeclareSIUnit\Torr{Torr}
\DeclareSIUnit\bar{bar}
\DeclareSIUnit\mmHg{mmHg}
\DeclareSIUnit\molar{M}
\DeclareSIUnit\gauss{G}



% % Maths
\usepackage{amsmath, amssymb, bm}
\usepackage{derivative} % Derivative
% \usepackage{mathrsfs}   % more symbols \mathscr{} (Hamiltonian)
% % Math fonts
% \usepackage[math-style=ISO]{unicode-math} % change math font
% \usepackage{firamath-otf}
\usepackage{mathtools}

% % MathOperators Declarations
\DeclareMathOperator\E{\,E}
\DeclareMathOperator\sign{sign}
% % Missing trigonometric math operators
\DeclareMathOperator\sech   {sech}
\DeclareMathOperator\csch   {csch}
\DeclareMathOperator\arcsec {arcsec}
\DeclareMathOperator\arccot {arccot}
\DeclareMathOperator\arccsc {arccsc}
\DeclareMathOperator\arccosh{arccosh}
\DeclareMathOperator\arcsinh{arcsinh}
% % Calculus operators
% \DeclareMathOperator\fronteira {fr}
% \DeclareMathOperator\interior  {int}
% \DeclareMathOperator\exterior  {ext}
% \DeclareMathOperator\grafico   {Graf}
% \DeclareMathOperator\dominio   {D}
% \DeclareMathOperator\visinhanca{\mathcal{V}}
% % Algebra operators
% \DeclareMathOperator\adj{adj}
% \DeclareMathOperator\id{id}
% \DeclareMathOperator\Img{Im}
% \DeclareMathOperator\Nuc{Nuc}
% \DeclareMathOperator\Ker{Ker}
% % Statistics Operator
% \DeclareMathOperator\esperanca{E}
% \DeclareMathOperator\variancia{V}
% \DeclareMathOperator\bernoulli{Ber}
% \DeclareMathOperator\binomial{Bin}
% \DeclareMathOperator\poisson{P}
% \DeclareMathOperator\normal{N}
%
% BM
\NewDocumentEnvironment{BM}{ O{gather*} O{\large} +b }{
    #2\boldmath\bfseries
    \begin{#1}
        #3
    \end{#1}\relax
}  {\relax}
% logic division
\NewDocumentCommand\ldiv{
    s        % #1 - line break
    tl       % #2 - Left  column
    tr       % #3 - Right column
    O{\land} % #4 - Division
    O{\,}    % #5 - Space
    m        % #6 - Before column
}{%
    \IfBooleanF{#1}{%
        \IfBooleanF{#2}{&}#5%
    }#4%
    \IfBooleanF{#1}{%
        \\#4#5#6\IfBooleanF{#3}{&}%
    }%
}
% Logic operators
\providecommand\lxor{\veebar}
\providecommand\lnand{\barwedge}
%
% % BM old
% % \newcommand{\BM}[1]{{\large\boldmath\bfseries%
% %     \begin{align*}
% %         #1
% %     \end{align*}%
% % }}
% ------------------------------ vert enclosings ----------------------------- %
\NewDocumentCommand\myvert{
    s   % 1 - no scalable
    m   % 2 - content
}{
    \IfBooleanF{#1}{\left}\lvert%
        #2%
    \IfBooleanF{#1}{\right}\rvert%
}
\NewDocumentCommand\myVert{
    s   % 1 - no scalable
    m   % 2 - content
}{
    \IfBooleanF{#1}{\left}\lVert%
        #2%
    \IfBooleanF{#1}{\right}\rVert%
}

% ---------------------------------- myrange --------------------------------- %
\NewDocumentCommand\myrange{
    % creates a closed range around content
    s   % 1 - invert all
    tl  % 2 - invert left
    tr  % 3 - invert right
    m   % 4 - content
}{
    \IfBooleanTF{#1}{%
        \IfBooleanTF{#2}{%
            \left[%
        }{%
            \left]%
        }%
        #4%
        \IfBooleanTF{#3}{%
            \right]%
        }{%
            \right[%
        }%
    }{%
        \IfBooleanTF{#2}{%
            \left]%
        }{%
            \left[%
        }%
        #4%
        \IfBooleanTF{#3}{%
            \right[%
        }{%
            \right]%
        }%
    }%
}



% Vectors
\usepackage{esvect}      % Vector over-arrow
% \NewCommandCopy\vec\vv



% Tikz
% \usepackage{tikz}
%     \usetikzlibrary{
%         perspective,
%         3d,
%         external,
%     }

% External remake commands
% 	ikzset{external/force remake=false} - remake all
% 	ikzset{external/remake next=true}   - remake next


% % External lib
% \tikzexternalize[
%     up to date check = {simple}, % faster check
%     figure list = true, % generate list of figures file
%     % optimize  = false,
%     % optimize command away = { % commands to be ignored when optimizing
%     %     \BM, \endBM,
%     %     \ldiv,
%     %     \question, \subquestion, \subsubquestion,
%     %     % \sobpart,
%     %     \questionBox, \endquestionBox,
%     %     \sectionBox,  \endsectionBox,
%     %     % \codeBox,     \endcodeBox
%     %     \mymaketitle
%     % },
%     prefix = ./.build/figures/graphics/
% ] % turn externalization on/off
% \tikzsetfigurename{figure_\arabic{part}.\arabic{section}.} % set figure names

% \tikzset{external/system call={%
%     lualatex \tikzexternalcheckshellescape
%     --halt-on-error
%     --shell-escape
%     --interaction=batchmode
%     --jobname "\image" "\texsource"
%     % --jobname "\image" \subfilename
% }}

% \NewCommandCopy\oldtikzpicture\tikzpicture
% \renewcommand\tikzpicture{\oldtikzpicture\nopagecolor}



% \usepackage{varwidth}   % List inside TikzPicture

% Gradient text color
% \newcommand\fadingtext[3][]{%
%     \begin{tikzfadingfrompicture}[name=fading letter]
%         \node[text=transparent!0,inner xsep=0pt,outer xsep=0pt,#1] {#3};
%     \end{tikzfadingfrompicture}%
%     \begin{tikzpicture}[baseline=(textnode.base)]
%         \node[inner sep=0pt, outer sep=0pt,#1](textnode){\phantom{#3}};
%         \shade[path fading=fading letter,#2,fit fading=false]%
%             (textnode.south west) rectangle (textnode.north east);%
%     \end{tikzpicture}%
% }

% \newcommand\fadingtext[2][]{%
%   \setbox0=\hbox{{\special{pdf:literal 7 Tr }#2}}%
%   \tikz[baseline=0]\path [#1] \pgfextra{\rlap{\copy0}} (0,-\dp0) rectangle (\wd0,\ht0);%
% }
%
% \NewCommandCopy\oldsection\section
% \renewcommand\section[1]{
%     \oldsection{\fadingtext{
%         left  color   = DarkGreen!00!foreground,
%         right color   = DarkGreen!30!foreground,
%         shading angle = 150 % 90 + 60
%     }{ \relax\parbox[b]{\linewidth}{#1} }}
% }
%
% \NewCommandCopy\oldpart\part
% \renewcommand\part[1]{
%     \oldpart{\fadingtext{
%         left  color   = Emph,
%         right color   = Emph!50!LightGreen,
%         shading angle = 170 % 90 + 60
%     }{ #1 }}
% }

% pgf
    % \usepackage{pgf}
    % pgfmath
    % \usepackage{pgfmath}    % calculations

    % pgfplots
    % \usepackage{pgfplots}
    % \usepgfplotslibrary{fillbetween}
    % 
    % 1e4 too much
    % 1e3 fancy
    % 1e2 simple
    % 1e1 draft
    % \newcommand\mysampledensityDouble{2}
    % \newcommand\mysampledensitySimple{1e1}
    % \newcommand\mysampledensityFancy{1e2}
    % \pgfplotsset{
    %     compat       = newest,
    %     width        = .95\linewidth, % width
    %     height       = 7cm, % height
    %     samples      = \mysampledensityDouble,
    %     % Color Map
    %     colormap = {cool}{
    %         color=(DarkGreen\Light!20!background);
    %         % color=(DarkGreen\Light!60!background);
    %         color=(DarkGreen\Light!70!background);
    %         % color=(DarkGreen\Light!80!background);
    %         color=(DarkGreen\Light!90!background)
    %     },
    %     % preset axis style
    %     every linear axis/.append style={
    %         xmajorgrids=true,
    %         ymajorgrids=true,
    %         minor tick num=3,
    %         xminorgrids=true,
    %         yminorgrids=true,
    %     },
    %     % Preset plot style
    %         every axis plot/.append style = {
    %         thick,
    %         % mark=*,
    %         mark options={
    %             fill=Emph,
    %             fill opacity=1
    %         },
    %         color=Emph,
    %         % fill=Emph,
    %         fill opacity=0.1,
    %     },
    %     % Legend
    %     legend style = {
    %         draw         = none,
    %         fill         = foreground\Dark,
    %         fill opacity = 0.3,
    %         text opacity = 1,
    %     },
    %     % Grid
    %     major grid style = {
    %         very thin,
    %         color= foreground!15!background
    %     },
    %     % Minor Grid
    %     minor grid style = {
    %         very thin,
    %         color= foreground!07!background
    %     },
    %     % Tick Label
    %     ticklabel style = {
    %         /pgf/number format/.cd,
    %         set thousands separator={\,},
    %         tick style = {
    %             color= foreground!60!background
    %         },
    %     },
    %     % Extra ticks
    %     every extra x tick/.style = {
    %         tick style       = {draw=none},
    %         major grid style = {
    %             draw, thin,
    %             color = foreground!90!background,
    %         },
    %         ticklabel pos = top,
    %     },
    %     every extra y tick/.style = {
    %         tick style       = {draw=none},
    %         major grid style = {
    %             draw, thin,
    %             color= foreground!90!background
    %         },
    %         ticklabel pos    = right,
    %     },
    % }

    % % pgfplotstable
    % \usepackage{pgfplotstable}


% Tabular
% \usepackage{multirow}
\usepackage{float}  % table position H(ere)
    \restylefloat{table}
% \usepackage{longtable}
%
\setlength\tabcolsep{6mm}        % width
\renewcommand\arraystretch{1.25} % height

% booktabs
\usepackage{booktabs}
\setlength\heavyrulewidth{.75pt} % Top and bottom rule
\setlength\lightrulewidth{.50pt} % Middle rule
% \usepackage{colortbl}            % Colored Cells

% % Mathtable
% \usepackage{array} % for \newcolumntype macro
% \newcolumntype{C}{>{$}c<{$}} % math-mode version of c column type
% \newcolumntype{L}{>{$}l<{$}} % math-mode version of l column type
% \newcolumntype{R}{>{$}r<{$}} % math-mode version of r column type

% \newcounter{tablecounter}
% % \newcommand\thetable{Tabela \arabic{tablecounter}:}
% \NewDocumentCommand\tablecaption{o m}{
%     \stepcounter{table}
%     Tabela \thetable{}: #2
%     \ifblank{#2}{}{\label{table:#1}}
%     \addcontentsline{lot}{table}{Tabela \thetable{}: #2}
% }



% % Chem
% \usepackage{chemformula} % formulas quimicas
% \usepackage{chemfig}     % Estruturas quimicas
% \usepackage{modiagram}   % Molecular orbital diagram
% \setmodiagram {
%     names,           % Display names
%     labels,          % Display labels
%     labels-fs=\tiny, % label font
% }
% \newlength\AtomVScale    \setlength\AtomVScale{1cm}
% \newlength\MoleculeVScale\setlength\MoleculeVScale{1cm}
% \usepackage{chemmacros}
% \chemsetup[phases]{pos=sub}
% \newcommand{\mol}[1]{ \unit{\mole\of{\ch{ #1 }}} } % mol



% % Biology
% \usepackage{mydnaseq}



% Constants
% \usepackage{physconst, physunits}



% Code
% % Run on terminal: lualatex --shell-escape [file[.tex]]
% \usepackage{shellesc, minted}
% \setminted {
%     linenos,     % line number
%     autogobble,  % line trim
%     tabsize = 4, % tab size
%     obeytabs,    % tab alignment
%     breaklines,  % break lines
%     % python3,     % Python lexer or idk
% }
% \usemintedstyle{stata-dark}
% % \usemintedstyle{fruity}
% % \usemintedstyle{paraiso}
% % \usemintedstyle{rainbow_dash}
% % \usemintedstyle{solarized-dark}
% % \usemintedstyle{native}



% tcolorbox
\usepackage{tcolorbox}
\tcbuselibrary{
    breakable,                % allow page break
    % minted, xparse, listings, % code minted
}
\tcbset{ every box/.style = {
    coltext      = foreground,           % text  color
    % coltitle     = foreground,           % title color
    % fonttitle    = \bfseries,       % title font
    notitle,                        % Remove title
    opacityfill  = 0.1,             % background opacity
    opacityframe = 0,               % frame      opacity
    colback      = Background,      % background color
    colframe     = Background,      % border     color
    arc          = 3mm,             % Curvature
    width        = \linewidth,      % Width
    top          = 3mm,             % Space between text and top
    bottom       = 3mm,             % Space between text and bottom
    before upper = {\parindent2ex}, % Paragraph indentation
    before skip  = 0mm,             % Set vspace before box
}}



% mytitle and myauthor
\newcommand\mytitle   {{title here}}
\newcommand\myauthor  {{Felipe B. Pinto 61387 -- MIEQB}}
\newcommand\mycreator {{Felipe B. Pinto}}
\newcommand\mysubject {{subject here}}
\newcommand\mykeywords{{{Keywords}}}

% title, author and date
\title{\huge\bfseries\color{Emph}\mytitle}
\author{\Large\myauthor}
\date{\Large\today}



% % fancyhdr - Header and Footer customization
% \usepackage{fancyhdr}
% \pagestyle{fancy}
% \fancyhf{} % Clear
% \fancyhead[R]{\normalsize\thepart}
% \fancyfoot[L]{\normalsize\myauthor}
% \fancyfoot[R]{\thepage}
% \renewcommand\footrulewidth{.5pt}
% % Marks 
% % \renewcommand{\partmark}[1]{\markboth{}{\thepart#1}}



% Subfiles
\usepackage{subfiles}



% hyperref
\usepackage{hyperref}
\hypersetup{
    % Links customization
    % hidelinks   = true,
    colorlinks  = true,
    linkcolor   = Link,
    anchorcolor = Link,
    urlcolor    = Link,
    % Metadata
    pdfinfo = {
        Title    = \mytitle,
        Author   = \myauthor,
        Creator  = \mycreator,
        Subject  = \mysubject,
        Keywords = \mykeywords,
    },
    % PDF display customization
    pdfpagelayout      = {OneColumn},
    pdfstartview       = {FitH},
    pdfremotestartview = {FitH}
    pdfdisplaydoctitle = true,
    % pdfpagetransition  = Glitter, % wtf
}
% Fix links when reseting section on part
% \renewcommand\theHpart{\theHsobpart.\arabic{part}}
\renewcommand\theHsection{\theHpart.\arabic{section}}

% get parttitle command
% \NewCommandCopy\oldpart{\part}
% \newcommand\parttitle{}
% \renewcommand{part}[1]{\oldpart{#1}\renewcommand{\parttitle}{#1}}

% Color targets
\NewCommandCopy\oldhypertarget\hypertarget
\renewcommand\hypertarget[3][Link]{\oldhypertarget{#2}{\textcolor{#1}{#3}}}



\usepackage{sections}
% \usepackage{questions}
% \usepackage{answers}
% \usepackage{examples}
% \usepackage{definitions}



% /* ------------------------- Divisions customization ------------------------ */
\renewcommand\thesubsubsection{(\roman{subsubsection})}
% \renewcommand\thepart{Part \arabic{part}}


\usepackage{mytitle}    % \mymaketitle
\usepackage{mysubfile}  % \mymakesubfile


\begin{document}

\mymaketitle


% print files
\begin{luacode*}

    -- Files Directory
    dir = "./"


    -- Prefix and sufix
    prefix = "F_IIQ-Anotações_Testes."
    sufix  = ""

    
    -- Print file range
    firstFile = 1 -- first file number
    lastFile  = 2 -- last  file number

    -- Print specific files by number
    index = {1}


    -- Loop
    -- for i=firstFile,lastFile,1 -- Print range
    -- for v,i in ipairs(index)   -- Print specific

    for i=firstFile,lastFile,1 -- Print range
    do
        tex.print(string.split(table.concat{
        [[
            \subfile{]], dir, prefix, string.format("%d", i), sufix, [[}\newpage
        ]]
        },"\n"))
    end

\end{luacode*}


\end{document}